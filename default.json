{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "enabled": true,
  "description": "Default Renovate config used by @Kiruyuto",
  "extends": [
    "config:recommended",
    "group:allNonMajor",
    ":gitSignOff",
    ":dependencyDashboard",
    ":disableRateLimiting",
    "helpers:pinGitHubActionDigests"
  ],
  "schedule": [
    "at any time"
  ],
  "labels": [
    "dependencies"
  ],
  "dependencyDashboardLabels": [
    "dependencies"
  ],
  "rangeStrategy": "bump",
  "commitBodyTable": true,
  "configMigration": true,
  "branchPrefix": "deps/",
  "prCreation": "immediate",
  "prBodyTemplate": "{{{header}}}{{{table}}}{{{warnings}}}{{{notes}}}{{{changelogs}}}{{{controls}}}{{{footer}}}",
  "dependencyDashboardFooter": "<h6>Renovate extends from Kiruyuto's default configuration. You can see all settings <a href=\"https://github.com/Kiruyuto/renovate-config/blob/master/default.json\">here</a></h6>\n\n- [ ] <!-- manual job -->Check this box to trigger a request for Renovate to run again on this repository",
  "commitMessageLowerCase": "never",
  "semanticCommits": "enabled",
  "semanticCommitScope": "dependencies",
  "rebaseWhen": "conflicted",
  "major": {
    "description": "Require dashboard approval for major updates",
    "automerge": false,
    "dependencyDashboardApproval": true
  },
  "patch": {
    "automerge": true,
    "automergeType": "branch",
    "automergeStrategy": "squash"
  },
  "minor": {
    "automerge": true,
    "automergeType": "branch",
    "automergeStrategy": "squash"
  },
  "lockFileMaintenance": {
    "enabled": true,
    "rebaseWhen": "behind-base-branch"
  },
  "vulnerabilityAlerts": {
    "enabled": true,
    "schedule": [
      "at any time"
    ],
    "dependencyDashboardApproval": false,
    "rangeStrategy": "update-lockfile",
    "commitMessageSuffix": "[SECURITY]",
    "branchTopic": "{{{datasource}}}-{{{depNameSanitized}}}-vulnerability",
    "prCreation": "immediate",
    "automerge": false,
    "labels": [
      "security"
    ]
  },
  "packageRules": [
    {
      "description": "Always use 'chore' for semantic commit type",
      "matchFileNames": [
        "**/*"
      ],
      "semanticCommitType": "chore"
    },
    {
      "description": "Group all GitHub Actions updates into single PR",
      "matchFileNames": [
        ".github/workflows/**"
      ],
      "matchDepTypes": [
        "!dotnet"
      ],
      "additionalBranchPrefix": "gh-actions-",
      "commitMessageSuffix": "(ci)"
    },
    {
      "description": "Group all Docker updates into single PR",
      "matchDatasources": [
        "docker"
      ],
      "additionalBranchPrefix": "docker-",
      "commitMessageSuffix": "(docker)"
    },
    {
      "description": "Group all .NET SDK updates into single PR",
      "matchDatasources": [
        "dotnet-version"
      ],
      "additionalBranchPrefix": "dotnet-",
      "commitMessageSuffix": "(dotnet)"
    },
    {
      "description": "Group all NuGet updates into single PR",
      "matchDatasources": [
        "nuget"
      ],
      "additionalBranchPrefix": "nuget-",
      "commitMessageSuffix": "(nuget)"
    },
    {
      "description": "Pin only NPM packages. Otherwise bump. Prevents errors with dotnet & docker builds. Additionally, group them into separate PRs",
      "matchDatasources": [
        "npm"
      ],
      "rangeStrategy": "pin",
      "additionalBranchPrefix": "npm-",
      "commitMessageSuffix": "(npm)"
    },
    {
      "description": "Group all Node.js updates into single PR",
      "matchDatasources": [
        "node-version"
      ],
      "additionalBranchPrefix": "node-",
      "commitMessageSuffix": "(node)"
    },
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": "Match dotnet-version in github workflows",
      "managerFilePatterns": [
        "/^\\.github/workflows/.+?\\.yaml$/",
        "/^\\.github/workflows/.+?\\.yml$/"
      ],
      "matchStrings": [
        "dotnet-version:\\s+(?<currentValue>\\S+)"
      ],
      "depTypeTemplate": "dotnet",
      "datasourceTemplate": "dotnet-version",
      "depNameTemplate": "dotnet-sdk",
      "versioningTemplate": "semver-coerced"
    },
    {
      "customType": "regex",
      "description": "Match .nuspec <dependency> tag",
      "managerFilePatterns": [
        "/\\.nuspec$/"
      ],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "<dependency\\s+id=\"(?<depName>.*?)\"\\s+version=\"(?<currentValue>.*?)\"\\s*\\/>"
      ],
      "datasourceTemplate": "nuget",
      "versioningTemplate": "nuget"
    },
    {
      "customType": "regex",
      "description": "Match <TargetFramework/> in .NET project files",
      "managerFilePatterns": [
        "/^Directory\\.Build\\.props$/",
        "/\\.csproj$/"
      ],
      "matchStrings": [
        "<TargetFramework>net(?<currentValue>\\d+\\.\\d+)</TargetFramework>"
      ],
      "datasourceTemplate": "dotnet-version",
      "versioningTemplate": "semver-partial"
    }
  ]
}